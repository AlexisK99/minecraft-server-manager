(this.webpackJsonpminecraftservermanager=this.webpackJsonpminecraftservermanager||[]).push([[0],{130:function(e,t,a){e.exports=a(158)},135:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),i=a.n(l),s=(a(135),a(10)),o=a.n(s),c=a(118),m=a(221),p=a(224),u=a(223),h=a(222),d=a(229),E=(a(30),a(205)),f=a(206),g=a(204),v=a(207),b=a(227),y=a(49),C=a(82),k=a.n(C),S=a(36),M=a.n(S),P=a(69),D=a.n(P);const O={container:{margin:10,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"}};class w extends r.a.Component{minecraftEulaAcceptedStatus(){const e=this.props.minecraftProperties;return e&&e.acceptedEula?r.a.createElement("div",null,r.a.createElement(b.a,{title:"Accepted"},r.a.createElement(k.a,null))):r.a.createElement("div",null,r.a.createElement(b.a,{title:"Not accepted"},r.a.createElement(M.a,null)))}minecraftOnline(){const e=this.props.minecraftProperties;return e&&e.started?r.a.createElement("div",null,r.a.createElement(b.a,{title:"Running"},r.a.createElement(k.a,null))):r.a.createElement("div",null,r.a.createElement(b.a,{title:"Minecraft is not running"},r.a.createElement(M.a,null)))}minecraftUpdate(){const e=this.props.minecraftProperties;return e&&e.updateAvailable?r.a.createElement("div",null,r.a.createElement(b.a,{title:"Update Available"},r.a.createElement(D.a,null))):r.a.createElement("div",null)}minecraftVersion(){const e=this.props.minecraftProperties;return e&&e.detectedVersion&&e.detectedVersion.major?r.a.createElement(g.a,null,r.a.createElement(y.a,null,e.detectedVersion.major+"."+e.detectedVersion.minor+"."+e.detectedVersion.release)):r.a.createElement(g.a,null)}minecraftUptime(){const e=this.props.minecraftProperties,t=Date.now();let a=0;return e&&e.started&&e.startTime>0?(a=(t-e.startTime)/1e3,r.a.createElement(g.a,null,r.a.createElement(y.a,null,function(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=Math.floor(e%60);return[t,a>9?a:"0"+a,n>9?n:"0"+n].filter(e=>e).join(":")}(a)))):r.a.createElement(g.a,null)}render(){return r.a.createElement("div",{style:O.container},r.a.createElement(y.a,{variant:"subtitle1"},"Server Information"),r.a.createElement(E.a,{size:"small"},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Minecraft Status")),r.a.createElement(g.a,null,this.minecraftOnline()),r.a.createElement(g.a,null,this.minecraftUpdate())),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"EULA Accepted")),r.a.createElement(g.a,null,this.minecraftEulaAcceptedStatus()),r.a.createElement(g.a,null)),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Minecraft Version")),this.minecraftVersion(),r.a.createElement(g.a,null)),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Server Address")),r.a.createElement(g.a,null,r.a.createElement(y.a,null,this.props.ipInfo.address?this.props.ipInfo.address+":"+this.props.ipInfo.port:"Not known.")),r.a.createElement(g.a,null)),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Server Uptime")),this.minecraftUptime(),r.a.createElement(g.a,null)))))}}var I=w,A=a(208);class W extends r.a.Component{render(){const e=this.props.player||{};return r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,null,e.name)))}}const R={container:{margin:10,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"}};class T extends r.a.Component{displayPlayerListItems(e){if(e.online)return r.a.createElement(W,{key:e.key,player:e})}render(){const e=this.props.minecraftProperties.playerInfo;let t=[],a="";return e&&(t=e.players,a=e.summary),r.a.createElement("div",{style:R.container},r.a.createElement(y.a,{variant:"subtitle1"},"Connected Players"),r.a.createElement(E.a,{size:"small"},r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},a||"Waiting on Minecraft server..."))))),r.a.createElement(E.a,null,r.a.createElement(f.a,null,t.map(this.displayPlayerListItems))))}}const V={container:{margin:10,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"}};class B extends r.a.Component{render(){return r.a.createElement("div",{style:V.container},r.a.createElement(I,{ipInfo:this.props.ipInfo,minecraftProperties:this.props.minecraftProperties}),r.a.createElement(T,{minecraftProperties:this.props.minecraftProperties}))}}var N=B,j=a(209),U=a(106),F=a.n(U),x=a(107),L=a.n(x),z=a(75),H=a.n(z),Y=a(83),J=a.n(Y);function K(e){return r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,null,e.player.name)),r.a.createElement(g.a,null,e.player.online?r.a.createElement(b.a,{title:"Online"},r.a.createElement(F.a,null)):r.a.createElement(b.a,{title:"Offline"},r.a.createElement(L.a,null)),e.player.opped?r.a.createElement(b.a,{title:"Opped"},r.a.createElement(H.a,null)):r.a.createElement("span",null),e.player.banned?r.a.createElement(b.a,{title:"Banned"},r.a.createElement(M.a,null)):r.a.createElement("span",null),e.player.whitelisted?r.a.createElement(b.a,{title:"Whitelisted"},r.a.createElement(J.a,null)):r.a.createElement("span",null)),r.a.createElement(g.a,null,e.player.banned?r.a.createElement(j.a,{onClick:()=>{e.pardonPlayer(e.player.name)}},r.a.createElement(b.a,{title:"Pardon"},r.a.createElement(M.a,null))):r.a.createElement(j.a,{onClick:()=>{e.banPlayer(e.player.name)}},r.a.createElement(b.a,{title:"Ban"},r.a.createElement(M.a,null))),r.a.createElement(j.a,{onClick:()=>{e.kickPlayer(e.player.name)}},r.a.createElement(b.a,{title:"Kick"},r.a.createElement(M.a,null))),e.player.opped?r.a.createElement(j.a,{onClick:()=>{e.deopPlayer(e.player.name)}},r.a.createElement(b.a,{title:"De Op"},r.a.createElement(H.a,null))):r.a.createElement(j.a,{onClick:()=>{e.opPlayer(e.player.name)}},r.a.createElement(b.a,{title:"Op"},r.a.createElement(H.a,null))),e.player.whitelisted?r.a.createElement("div",null):r.a.createElement(j.a,{onClick:()=>{e.whitelistPlayer(e.player.name)}},r.a.createElement(b.a,{title:"Whitelist"},r.a.createElement(J.a,null)))))}const q={container:{margin:10,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"}};class G extends r.a.Component{constructor(e){super(e),this.banPlayer=this.banPlayer.bind(this),this.deopPlayer=this.deopPlayer.bind(this),this.displayPlayerListItems=this.displayPlayerListItems.bind(this),this.kickPlayer=this.kickPlayer.bind(this),this.opPlayer=this.opPlayer.bind(this),this.pardonPlayer=this.pardonPlayer.bind(this),this.whitelistPlayer=this.whitelistPlayer.bind(this)}banPlayer(e){let t=!1;this.props.minecraftProperties.playerInfo.players.forEach(a=>{a.name===e&&(t=!0)}),t&&o()({method:"post",url:"/api/command",params:{command:"/ban "+e}}).then(()=>{},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}pardonPlayer(e){let t=!1;this.props.minecraftProperties.playerInfo.players.forEach(a=>{a.name===e&&(t=!0)}),t&&o()({method:"post",url:"/api/command",params:{command:"/pardon "+e}}).then(()=>{},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}kickPlayer(e){let t=!1;this.props.minecraftProperties.playerInfo.players.forEach(a=>{a.name===e&&(t=!0)}),t&&o()({method:"post",url:"/api/command",params:{command:"/kick "+e}}).then(()=>{},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}opPlayer(e){let t=!1;this.props.minecraftProperties.playerInfo.players.forEach(a=>{a.name===e&&(t=!0)}),t&&o()({method:"post",url:"/api/command",params:{command:"/op "+e}}).then(()=>{},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}deopPlayer(e){let t=!1;this.props.minecraftProperties.playerInfo.players.forEach(a=>{a.name===e&&(t=!0)}),t&&o()({method:"post",url:"/api/command",params:{command:"/deop "+e}}).then(()=>{},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}whitelistPlayer(e){let t=!1;this.props.minecraftProperties.playerInfo.players.forEach(a=>{a.name===e&&(t=!0)}),t&&o()({method:"post",url:"/api/command",params:{command:"/whitelist "+e}}).then(()=>{},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}displayPlayerListItems(e){return r.a.createElement(K,{key:e.key,player:e,banPlayer:this.banPlayer,pardonPlayer:this.pardonPlayer,kickPlayer:this.kickPlayer,opPlayer:this.opPlayer,deopPlayer:this.deopPlayer,whitelistPlayer:this.whitelistPlayer})}render(){const e=this.props.minecraftProperties.playerInfo;let t=[],a="";return e&&e.players&&(a=e.summary,t=e.players),r.a.createElement("div",{style:q.container},r.a.createElement(y.a,{variant:"subtitle1"},a||"Waiting on Minecraft server..."),r.a.createElement(E.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Player")),r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Status")),r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Actions")))),r.a.createElement(f.a,null,t.map(this.displayPlayerListItems))))}}var $=a(108),_=a(214),Q=a(215),X=a(113),Z=a.n(X),ee=a(165),te=a(111),ae=a.n(te),ne=a(112),re=a.n(ne),le=a(51),ie=a(228),se=a(213),oe=a(211),ce=a(212),me=a(210);function pe(e){const t=e.onClose,a=Object(le.a)(e,["onClose"]);return r.a.createElement(ie.a,a,r.a.createElement(me.a,null,"Please Wait"),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,"Requested action in progress...")),r.a.createElement(se.a,null,r.a.createElement(_.a,{onClick:t,variant:"contained",color:"primary",autoFocus:!0},"Close")))}function ue(e){const t=e.detectedVersion,a=e.selectedVersionToInstall,n=e.onNo,l=e.onYes,i=Object(le.a)(e,["detectedVersion","selectedVersionToInstall","onNo","onYes"]);let s="";return t&&t.full&&(s=t.full),r.a.createElement(ie.a,i,r.a.createElement(me.a,null,"Confirm Version Change"),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,"The current running version is ",s,", but the selected version is ",a?a.full:"unknown",". Changing to a lower version may delete the current world."),r.a.createElement(ce.a,null,"Continue?")),r.a.createElement(se.a,null,r.a.createElement(_.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"No"),r.a.createElement(_.a,{onClick:l,color:"primary",variant:"contained"},"Yes")))}var he=a(48),de=a(160),Ee=a(161),fe=a(167),ge=a(109),ve=a.n(ge),be=a(72),ye=a.n(be),Ce=a(110),ke=a.n(Ce);function Se(e){const t=e.onNo,a=e.onYes,n=Object(le.a)(e,["onNo","onYes"]);return r.a.createElement(ie.a,n,r.a.createElement(me.a,null,"Confirm Minecraft Restart"),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,"Saving new properties will restart the Minecraft server."),r.a.createElement(ce.a,null,"Continue?")),r.a.createElement(se.a,null,r.a.createElement(_.a,{onClick:t,color:"primary",variant:"contained",autoFocus:!0},"No"),r.a.createElement(_.a,{onClick:a,color:"primary",variant:"contained"},"Yes")))}function Me(e){let t=Object.assign([],e.minecraftProperties.serverProperties);const a=Object(n.useState)(!1),l=Object(he.a)(a,2),i=l[0],s=l[1],c=Object(n.useState)(!1),m=Object(he.a)(c,2),p=m[0],u=m[1],h=Object(n.useState)(!1),d=Object(he.a)(h,2),b=d[0],C=d[1],k=Object(n.useState)(e.minecraftProperties.serverProperties),S=Object(he.a)(k,2),M=S[0],P=S[1],D=()=>{u(!0)},O=()=>{C(!1)},w=()=>{D(),o()({method:"get",url:"/api/refreshServerProperties"}).then(e=>{P(e.data.properties),t=Object.assign({},e.data.properties),s(!1),u(!1)},e=>{console.log("An error occurred contacting the Minecraft server.",e),u(!1)})},I=e=>{const t=Object.assign([],M);let a,n=!1;for(let r=0;r<t.length;r++)if(a=t[r],a.name===e.target.id){a.value!==e.target.value&&(a.value=e.target.value,n=!0);break}n&&(P(t),s(!0))};return r.a.createElement("div",null,r.a.createElement(pe,{open:p,onClose:()=>{u(!1)}}),r.a.createElement(Se,{open:b,onNo:O,onYes:()=>{O(),D();const e=JSON.stringify(M);o()({method:"post",url:"/api/saveMinecraftProperties",params:{newProperties:e}}).then(()=>{w()},e=>{console.log("An error occurred contacting the Minecraft server.",e),w()})}}),r.a.createElement(y.a,{variant:"subtitle1"},"Server Properties"),r.a.createElement(y.a,null,"Change Minecraft server properties. When finished, click ",r.a.createElement("strong",null,"Save"),".\xa0",r.a.createElement(y.a,{variant:"caption"},"(Saving changes will require a Minecraft restart.)")),r.a.createElement(y.a,null,r.a.createElement("strong",null,"Undo")," will reset all fields to the current running settings."),r.a.createElement(y.a,null,r.a.createElement("strong",null,"Refresh")," reads current values from the Minecraft server files."),r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:w},r.a.createElement(ve.a,null),"Refresh"),r.a.createElement(_.a,{disabled:!i,variant:"contained",color:"primary",onClick:()=>{C(!0)}},r.a.createElement(ye.a,null),"Save"),r.a.createElement(_.a,{disabled:!i,variant:"contained",color:"primary",onClick:()=>{P(t),s(!1)}},r.a.createElement(ke.a,null),"Undo"),r.a.createElement("div",{style:{maxHeight:"100vh",overflow:"auto"}},r.a.createElement(E.a,{size:"small"},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null)),M&&M.length?M.map(e=>r.a.createElement(v.a,{key:e.name},r.a.createElement(g.a,null,r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(fe.a,{htmlFor:"{ property.name }"},e.name),r.a.createElement(Ee.a,{id:e.name,value:e.value,fullWidth:!0,onChange:I,onKeyPress:I}))))):r.a.createElement(v.a,null,r.a.createElement(g.a,null,"Waiting on Minecraft server..."))))))}const Pe={container:{margin:10,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"}};class De extends r.a.Component{constructor(e){super(e);let t=e.minecraftProperties.detectedVersion;t&&t.full||(t={full:"latest"}),this.state={progressDialogOpen:!1,versionDialogOpen:!1,versionToInstall:t},this.checkVersionToInstall=this.checkVersionToInstall.bind(this),this.closeProgressDialog=this.closeProgressDialog.bind(this),this.closeVersionDialog=this.closeVersionDialog.bind(this),this.handleVersionConfirmation=this.handleVersionConfirmation.bind(this),this.openProgressDialog=this.openProgressDialog.bind(this),this.installMinecraft=this.installMinecraft.bind(this),this.restartMinecraft=this.restartMinecraft.bind(this),this.selectVersionToInstall=this.selectVersionToInstall.bind(this),this.startMinecraft=this.startMinecraft.bind(this),this.stopMinecraft=this.stopMinecraft.bind(this)}openProgressDialog(){this.setState({progressDialogOpen:!0})}closeProgressDialog(){this.setState({progressDialogOpen:!1})}closeVersionDialog(){this.setState({versionToInstall:this.props.minecraftProperties.detectedVersion}),this.setState({versionDialogOpen:!1})}checkVersionToInstall(){this.props.minecraftProperties.detectedVersion.full&&this.state.versionToInstall.full!==this.props.minecraftProperties.detectedVersion.full?this.setState({versionDialogOpen:!0}):this.installMinecraft()}displayReleaseVersions(e){return r.a.createElement(Q.a,{key:e.id,value:e.id},e.id)}handleAcceptEula(){o()({method:"post",url:"/api/acceptEula"}).catch(e=>{console.log("An error occurred accepting the EULA:",e)})}handleVersionConfirmation(e){e&&"string"===typeof e&&this.setState({versionToInstall:{full:e}}),this.setState({versionDialogOpen:!1}),this.installMinecraft()}installMinecraft(){this.setState({progressDialogOpen:!0}),o()({method:"post",url:"/api/install",params:{version:this.state.versionToInstall.full}}).then(()=>{this.props.startMinecraftStatus(),this.setState({progressDialogOpen:!1}),this.selectVersionToInstall({target:{value:this.props.minecraftProperties.detectedVersion}})},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}restartMinecraft(){this.setState({progressDialogOpen:!0}),o()({method:"post",url:"/api/restart"}).then(()=>{this.props.startMinecraftStatus(),this.setState({progressDialogOpen:!1})},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}selectVersionToInstall(e){const t=this.props.minecraftProperties;let a={},n="";if(t.versions&&(a=t.versions.release),a&&a.length){var r,l=Object($.a)(a);try{for(l.s();!(r=l.n()).done;){const t=r.value;if(t.id===e.target.value){n={full:t.id};break}}}catch(i){l.e(i)}finally{l.f()}n||(n={full:"latest"}),this.setState({versionToInstall:n})}}startMinecraft(){this.setState({progressDialogOpen:!0}),o()({method:"post",url:"/api/start"}).then(()=>{this.props.startMinecraftStatus(),this.setState({progressDialogOpen:!1})},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}stopMinecraft(){this.setState({progressDialogOpen:!0}),o()({method:"post",url:"/api/stop"}).then(()=>{this.setState({progressDialogOpen:!1})},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}render(){const e=this.props.minecraftProperties;return r.a.createElement("div",{style:Pe.container},r.a.createElement(pe,{open:this.state.progressDialogOpen,onClose:this.closeProgressDialog}),r.a.createElement(ue,{open:this.state.versionDialogOpen,onNo:this.closeVersionDialog,onYes:this.handleVersionConfirmation,detectedVersion:e.detectedVersion,selectedVersionToInstall:this.state.versionToInstall}),r.a.createElement(y.a,{variant:"subtitle1"},"Server Controls"),r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(_.a,{onClick:this.startMinecraft,disabled:!e.settings.javaHome||!e.settings.javaPath||e.started,variant:"contained",color:"primary"},r.a.createElement(ae.a,null),"Start"),r.a.createElement(_.a,{onClick:this.stopMinecraft,disabled:!e.started,variant:"contained",color:"primary"},r.a.createElement(re.a,null),"Stop"),r.a.createElement(_.a,{onClick:this.restartMinecraft,disabled:!e.started,variant:"contained",color:"primary"},r.a.createElement(Z.a,null),"Restart")),r.a.createElement(g.a,null,r.a.createElement(_.a,{onClick:this.checkVersionToInstall,variant:"contained",color:"primary"},"Install"),r.a.createElement(ee.a,{value:this.state.versionToInstall.full,onChange:this.selectVersionToInstall},r.a.createElement(Q.a,{key:"latest",value:"latest"},r.a.createElement("em",null,"latest")),e.versions&&e.versions.release?e.versions.release.map(this.displayReleaseVersions):r.a.createElement("div",null))),r.a.createElement(g.a,null,r.a.createElement(_.a,{onClick:this.handleAcceptEula,disabled:!e.installed||e.acceptedEula,variant:"contained",color:"primary"},"Accept EULA")),r.a.createElement(g.a,null,e.updateAvailable?r.a.createElement(b.a,{title:"Update Available"},r.a.createElement(_.a,null,r.a.createElement(D.a,null))):r.a.createElement("div",null),r.a.createElement(_.a,{disabled:!0,variant:"contained",color:"primary"},"Check for updates"))))),r.a.createElement(Me,{minecraftProperties:e}))}}var Oe=De,we=a(115),Ie=a.n(we),Ae=a(218),We=a(73),Re=a.n(We),Te=a(117),Ve=a.n(Te),Be=a(116),Ne=a.n(Be),je=a(219);class Ue extends r.a.Component{render(){return r.a.createElement(ie.a,{open:this.props.open},r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,"Would you like to backup the world first?")),r.a.createElement(se.a,null,r.a.createElement(_.a,{onClick:this.props.cancelDialog,color:"primary"},"Cancel"),r.a.createElement(_.a,{onClick:this.props.newOnly,color:"primary"},"No"),r.a.createElement(_.a,{onClick:this.props.backupAndNew,color:"primary",autoFocus:!0},"Yes")))}}var Fe=a(114),xe=a.n(Fe),Le=a(216),ze=a(162),He=a(217);const Ye={container:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"}};class Je extends r.a.Component{constructor(e){super(e),this.closeDialog=this.closeDialog.bind(this),this.listCommands=this.listCommands.bind(this)}closeDialog(e){this.props.updateRawCommandField(e),this.props.onClose()}listCommands(e){return r.a.createElement(ze.a,{key:e.key,button:!0,onClick:()=>{this.closeDialog(e.command)}},r.a.createElement(He.a,{primary:e.command}),r.a.createElement(Ae.a,null))}render(){return r.a.createElement(ie.a,{fullScreen:!0,open:this.props.open,style:Ye.container},r.a.createElement(me.a,null,r.a.createElement(j.a,{onClick:this.props.onClose},r.a.createElement(xe.a,null)),"Available Minecraft Commands"),r.a.createElement(oe.a,null,r.a.createElement(Le.a,{dense:!0},this.props.minecraftCommands?this.props.minecraftCommands.map(this.listCommands):r.a.createElement("div",null))),r.a.createElement(se.a,null,r.a.createElement(_.a,{onClick:this.props.onClose,color:"primary"},"Cancel")))}}var Ke=a(164);class qe extends r.a.Component{render(){const e=this.props.backup;return r.a.createElement("option",{value:e.fileName},e.worldName,": Taken ",e.date," at ",e.time)}}class Ge extends n.Component{constructor(e){super(e),this.state={backupValue:""}}displayBackupItems(e){return r.a.createElement(qe,{key:e.fileName,backup:e})}render(){const e=this.props.potentialBackups;return r.a.createElement(ie.a,{open:this.props.open},r.a.createElement(oe.a,null,r.a.createElement(de.a,null,r.a.createElement(ee.a,{native:!0,inputProps:{id:"backup"},value:this.state.backupValue},e.map(this.displayBackupItems))),r.a.createElement(Ke.a,null,"Choose a backup to restore")),r.a.createElement(se.a,null,r.a.createElement(_.a,{onClick:this.props.onClose,color:"primary"},"Cancel"),r.a.createElement(_.a,{onClick:this.props.onClose,color:"primary",autoFocus:!0},"Close")))}}const $e={container:{margin:10,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"}};class _e extends r.a.Component{constructor(e){super(e),this.state={backupDialogOpen:!1,commandOutput:"",helpDialogOpen:!1,potentialBackups:[],progressDialogOpen:!1,rawMinecraftCommandDialogOpen:!1,rawCommand:"",restoreDialogOpen:!1,restoreBackup:{}},this.backupAndNewMinecraftWorld=this.backupAndNewMinecraftWorld.bind(this),this.backupAndRestoreMinecraftWorld=this.backupAndRestoreMinecraftWorld.bind(this),this.backupMinecraftWorld=this.backupMinecraftWorld.bind(this),this.closeBackupDialog=this.closeBackupDialog.bind(this),this.closeProgressDialog=this.closeProgressDialog.bind(this),this.closeRawCommandDialog=this.closeRawCommandDialog.bind(this),this.closeRestoreDialog=this.closeRestoreDialog.bind(this),this.getMinecraftWorldBackups=this.getMinecraftWorldBackups.bind(this),this.newMinecraftWorld=this.newMinecraftWorld.bind(this),this.onClearCommand=this.onClearCommand.bind(this),this.onClearOutput=this.onClearOutput.bind(this),this.onSendCommand=this.onSendCommand.bind(this),this.openBackupBeforeNewDialog=this.openBackupBeforeNewDialog.bind(this),this.openProgressDialog=this.openProgressDialog.bind(this),this.openRawCommandDialog=this.openRawCommandDialog.bind(this),this.openRestoreDialog=this.openRestoreDialog.bind(this),this.restoreMinecraftWorld=this.restoreMinecraftWorld.bind(this),this.updateRawCommandDialog=this.updateRawCommandDialog.bind(this),this.updateRawCommandType=this.updateRawCommandType.bind(this)}backupAndNewMinecraftWorld(){this.backupMinecraftWorld(),this.newMinecraftWorld()}backupAndRestoreMinecraftWorld(){this.backupMinecraftWorld(),this.restoreMinecraftWorld()}backupMinecraftWorld(){this.setState({backupDialogOpen:!1,progressDialogOpen:!0,restoreDialogOpen:!1}),o()({method:"post",url:"/api/backupWorld"}).then(()=>{this.setState({progressDialogOpen:!1})},e=>{console.log("An error occurred contacting the Minecraft server.",e),this.setState({progressDialogOpen:!1})})}closeBackupDialog(){this.setState({backupDialogOpen:!1})}closeProgressDialog(){this.setState({progressDialogOpen:!1})}closeRawCommandDialog(){this.setState({rawMinecraftCommandDialogOpen:!1})}closeRestoreDialog(e){e.filename?(this.setState({restoreBackup:e}),console.log("Would restore world: ",e),this.setState({restoreDialogOpen:!1}),this.restoreMinecraftWorld(e)):this.setState({restoreDialogOpen:!1})}getMinecraftWorldBackups(){o()({method:"get",url:"/api/listWorldBackups"}).then(e=>{const t=e.data.backupList;console.log("backupList response:",t),t.length?(this.setState({potentialBackups:t}),this.setState({restoreDialogOpen:!0})):(this.setState({potentialBackups:[{key:"nothingtoseehere",fileName:"nope",worldName:"",date:""}]}),console.log("An error occurred getting backups from the Minecraft server.",t))},e=>{console.log("An error occurred contacting the Minecraft server.",e),this.setState({restoreDialogOpen:!1})})}newMinecraftWorld(){this.setState({backupDialogOpen:!1,progressDialogOpen:!0,restoreDialogOpen:!1}),o()({method:"post",url:"/api/newWorld",params:{backup:!1}}).then(()=>{this.setState({progressDialogOpen:!1})},e=>{console.log("An error occurred contacting the Minecraft server.",e),this.setState({progressDialogOpen:!1})})}onClearCommand(){this.setState({rawCommand:""})}onClearOutput(){this.setState({commandOutput:""})}onSendCommand(){this.state.rawCommand&&o()({method:"post",url:"/api/command",params:{command:this.state.rawCommand}}).then(e=>{const t=e.data.output;this.setState({rawCommand:""}),this.setState({commandOutput:t})},e=>{console.log("An error occurred contacting the Minecraft server.",e),this.setState({progressDialogOpen:!1})})}openBackupBeforeNewDialog(){this.setState({backupDialogOpen:!0,progressDialogOpen:!1,rawMinecraftCommandDialogOpen:!1})}openProgressDialog(){this.setState({backupDialogOpen:!1,progressDialogOpen:!0,rawMinecraftCommandDialogOpen:!1})}openRawCommandDialog(){this.setState({backupDialogOpen:!1,progressDialogOpen:!1,rawMinecraftCommandDialogOpen:!0})}openRestoreDialog(){this.getMinecraftWorldBackups(),this.setState({backupDialogOpen:!1,progressDialogOpen:!1,rawMinecraftCommandDialogOpen:!1,restoreDialogOpen:!0})}restoreMinecraftWorld(e){this.setState({backupDialogOpen:!1,progressDialogOpen:!0,restoreDialogOpen:!1}),o()({method:"post",url:"/api/command",params:{command:"/restoreWorld",backupFile:e,backup:!1}}).then(()=>{this.setState({backupDialogOpen:!1,progressDialogOpen:!1,restoreDialogOpen:!1}),this.setState({restoreBackup:{}})},e=>{console.log("An error occurred contacting the Minecraft server.",e),this.setState({restoreDialogOpen:!1})})}updateRawCommandType(e){"Enter"===e.key?this.onSendCommand():this.setState({rawCommand:e.target.value})}updateRawCommandDialog(e){this.setState({rawCommand:e})}render(){return r.a.createElement("div",{style:$e.container},r.a.createElement(Ue,{backupAndNew:this.backupAndNewMinecraftWorld,newOnly:this.newMinecraftWorld,cancelDialog:this.closeBackupDialog,open:this.state.backupDialogOpen}),r.a.createElement(pe,{open:this.state.progressDialogOpen,onClose:this.closeProgressDialog}),r.a.createElement(Je,{open:this.state.rawMinecraftCommandDialogOpen,onClose:this.closeRawCommandDialog,minecraftCommands:this.props.minecraftProperties.fullHelp,updateRawCommandField:this.updateRawCommandDialog}),r.a.createElement(Ge,{open:this.state.restoreDialogOpen,onClose:this.closeRestoreDialog,potentialBackups:this.state.potentialBackups}),r.a.createElement(y.a,{variant:"subtitle1"},"World Controls"),r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.backupMinecraftWorld},r.a.createElement(Ie.a,null),"Backup World"),r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.openRestoreDialog,disabled:!0},r.a.createElement(Ne.a,null),"Restore World"),r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.openBackupBeforeNewDialog},r.a.createElement(Ve.a,null),"New World"))))),r.a.createElement(y.a,{variant:"subtitle1"},"Send Minecraft Command"),r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(fe.a,{htmlFor:"rawCommand"},"Enter command. Click the Help icon for a full list of supported commands."),r.a.createElement(Ee.a,{id:"rawCommand",fullWidth:!0,value:this.state.rawCommand,onChange:this.updateRawCommandType,onKeyPress:this.updateRawCommandType}),r.a.createElement(Ae.a,null)),r.a.createElement(b.a,{title:"List available Minecraft commands"},r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.openRawCommandDialog},r.a.createElement(Re.a,null))),r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.onClearCommand},"Clear Command"),r.a.createElement(_.a,{variant:"contained",color:"primary",disabled:!this.props.minecraftProperties.started&&""===!this.state.rawCommand,onClick:this.onSendCommand},"Send Command"),r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(je.a,{label:"Command Output",multiline:!0,rows:"6",margin:"normal",variant:"outlined",value:this.state.commandOutput})),r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:this.onClearOutput},"Clear Output"))}}var Qe=a(226),Xe=a(220);function Ze(e){const t=Object(n.useState)(e.apiSettings),a=Object(he.a)(t,2),l=a[0],i=a[1];return r.a.createElement("div",null,r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:()=>{o()({method:"post",url:"/api/saveApiPreferences",params:{settings:JSON.stringify(l)}},e=>{console.log("An error occurred contacting the Minecraft server.",e)})}},r.a.createElement(ye.a,null),"Save"),r.a.createElement(E.a,{size:"small"},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(Xe.a,{control:r.a.createElement(Qe.a,{checked:l.autoStartMinecraft,onChange:(e,t)=>{const a=Object.assign({},l);let n={autoStartMinecraft:t};n=Object.assign(a,n),i(n)}}),label:"Auto-start Minecraft with this website?"})))),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(fe.a,{htmlFor:"{ ipAddress }"},"The IP address to listen on."),r.a.createElement(Ee.a,{id:"ipAddress",value:l.ipAddress,fullWidth:!0})))),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(fe.a,{htmlFor:"{ ipPort }"},"The IP port to listen on."),r.a.createElement(Ee.a,{id:"ipPort",value:l.ipPort,fullWidth:!0})))))))}class et extends r.a.Component{render(){const e=this.props.minecraftProperties,t=Math.pow(1024,3),a=e.nodeInfo?e.nodeInfo.mem/t:"Unknown";return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"h6"},r.a.createElement("a",{href:e.eulaUrl,target:"_blank",rel:"noopener noreferrer"},"Minecraft End User License Agreement")))))),r.a.createElement(E.a,{size:"small"},r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Project Owner")),r.a.createElement(g.a,null,r.a.createElement(y.a,null,"nickrnet"))),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"Contributors")),r.a.createElement(g.a,null,r.a.createElement(y.a,null,"DevBonBon"))))),r.a.createElement("p",null),r.a.createElement(E.a,{size:"small"},r.a.createElement(A.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"System Information")),r.a.createElement(g.a,null," "),r.a.createElement(g.a,null," "))),r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"CPU")),r.a.createElement(g.a,null,r.a.createElement(y.a,null,e.nodeInfo?e.nodeInfo.cpus[0].model+", "+e.nodeInfo.cpus.length+" cores":"Unknown")),r.a.createElement(g.a,null,r.a.createElement(b.a,{title:"Logical CPUs, both physical and virtual"},r.a.createElement(Re.a,null)))),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"RAM")),r.a.createElement(g.a,null,r.a.createElement(y.a,null,a," GB")),r.a.createElement(g.a,null," ")),r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"subtitle2"},"NodeJS Version")),r.a.createElement(g.a,null,r.a.createElement(y.a,null,e.nodeInfo?e.nodeInfo.version:"Unknown")),r.a.createElement(g.a,null," ")))))}}var tt=et;class at extends r.a.Component{constructor(e){super(e),this.state={debug:!1,ipInfo:{},apiSettings:{},minecraftStatus:{},minecraftStatusMessage:"",eulaOpen:!1,minecraftProperties:{},playerInfo:{},value:0},this.handleAcceptEula=this.handleAcceptEula.bind(this),this.handleDeclineEula=this.handleDeclineEula.bind(this),this.getIpInfo=this.getIpInfo.bind(this),this.getMinecraftServerProperties=this.getMinecraftServerProperties.bind(this),this.getMinecraftStatus=this.getMinecraftStatus.bind(this),this.startMinecraftStatus=this.startMinecraftStatus.bind(this),this.stopMinecraftStatus=this.stopMinecraftStatus.bind(this),this.handleChange=this.handleChange.bind(this),this.stopMinecraftStatus=this.stopMinecraftStatus.bind(this),this.startMinecraftStatus()}getTheme(){return Object(c.a)({tableRowColumn:{height:60},container:{margin:10,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:"0.95rem"},overrides:{MuiButton:{root:{margin:"10px"}}}})}componentWillUnmount(){this.stopMinecraftStatus()}handleChange(e,t){this.setState({value:t})}getIpInfo(){let e;o()("/api/ipInfo").then(t=>{e=t.data,this.setState({ipInfo:e})})}getMinecraftStatus(e){let t="";let a;a=e?e<1e3?e:e>12e4?5e3:e:5e3,this.statusTimerId&&clearTimeout(this.statusTimerId),this.statusTimerId=setTimeout(()=>{o()("/api/status").then(e=>{const a=e.data.apiSettings,n=e.data.minecraftProperties;this.setState({apiSettings:a}),this.setState({minecraftProperties:n}),n.settings.javaHome&&n.settings.javaPath?n.started?n.acceptedEula||(t="The Minecraft EULA needs to be accepted."):t="Minecraft is not running.":t="Java is not properly installed.",this.setState({minecraftStatusMessage:t}),this.getMinecraftStatus()},e=>{this.setState({minecraftStatus:{}}),a+=5e3,this.getMinecraftStatus(a)})},a)}getMinecraftServerProperties(){o()("/api/properties").then(e=>{let t=e.data;t=t.properties,this.setState({minecraftServerProperties:t})},e=>{console.log("An error occurred contacting the Minecraft server.",e)}).catch(e=>{console.log("An error occurred getting the server properties:",e)})}handleAcceptEula(){o()({method:"post",url:"/api/acceptEula"}).then(()=>{this.setState({eulaOpen:!1})},e=>{console.log("error:",e),this.setState({eulaOpen:!1})}).catch(e=>{console.log("error:",e),this.setState({eulaOpen:!1})})}handleDeclineEula(){o()({method:"post",url:"/api/stop"}).then(()=>{this.setState({eulaOpen:!1})},e=>{console.log("error:",e),this.setState({eulaOpen:!1})}).catch(e=>{console.log("error:",e),this.setState({eulaOpen:!1})})}runOnce(){this.getIpInfo(),this.getMinecraftServerProperties()}startMinecraftStatus(){this.runOnce(),this.getMinecraftStatus(25)}stopMinecraftStatus(){this.statusTimerId&&clearTimeout(this.statusTimerId),this.playersTimerId&&clearTimeout(this.playersTimerId)}render(){const e=this.state.minecraftProperties;return r.a.createElement(m.a,{theme:this.getTheme()},r.a.createElement(h.a,{position:"static"},r.a.createElement(p.a,{value:this.state.value,onChange:this.handleChange,centered:!0},r.a.createElement(u.a,{label:"Dashboard"}),r.a.createElement(u.a,{label:"Players"}),r.a.createElement(u.a,{label:"World Controls"}),r.a.createElement(u.a,{label:"Server Controls"}),r.a.createElement(u.a,{label:"Preferences"}),r.a.createElement(u.a,{label:"About"}))),0===this.state.value&&r.a.createElement(N,{ipInfo:this.state.ipInfo,minecraftProperties:e}),1===this.state.value&&r.a.createElement(G,{minecraftProperties:e}),2===this.state.value&&r.a.createElement(_e,{minecraftProperties:e,startMinecraftStatus:this.startMinecraftStatus,stopMinecraftStatus:this.stopMinecraftStatus}),3===this.state.value&&r.a.createElement(Oe,{minecraftProperties:e,startMinecraftStatus:this.startMinecraftStatus,stopMinecraftStatus:this.stopMinecraftStatus}),4===this.state.value&&r.a.createElement(Ze,{apiSettings:this.state.apiSettings}),5===this.state.value&&r.a.createElement(tt,{minecraftProperties:e}),r.a.createElement(d.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!e.started,message:this.state.minecraftStatusMessage}))}}const nt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rt(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(at,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");nt?function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):rt(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):rt(e)})}}()}},[[130,1,2]]]);
//# sourceMappingURL=main.ee90cf2b.chunk.js.map